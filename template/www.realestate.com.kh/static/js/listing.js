var mortgageCalculator=function(interest_rate,deposit,loan_terms,loan_amount){loan_amount-=deposit;var mi=interest_rate/5200,base=1,mbase=1+mi;for(i=0;i<52*loan_terms;i++)base*=mbase;var mp=Math.floor(loan_amount*mi/(1-1/base)),mp2=Math.floor(mp*(52*loan_terms)),zer="";return 100*mp%10==0&&(zer="0"),10*mp%10==0&&(zer=".00"),calulated_value=mp+zer,calulated_value_with_dollar_sign="$"+calulated_value,calulated_value},property_price=loan_amount,property_deposit=1e4,property_rate=7,property_term=30,update_calculator_value=function(){repayment=mortgageCalculator(property_rate,property_deposit,property_term,property_price),$("#calculated-value").text(repayment+" / week"),$('.mortgage-calculator-wrapper input[name="price"]').val(property_price),$('.mortgage-calculator-wrapper input[name="deposit"]').val(property_deposit),$('.mortgage-calculator-wrapper input[name="rate"]').val(property_rate),$('.mortgage-calculator-wrapper input[name="term"]').val(property_term)};update_calculator_value(),$(document).ready(function(){$(".mortgage-property-price").slider({value:loan_amount,orientation:"horizontal",range:"max",min:1e3,max:5e6,animate:!0,slide:function(event,ui){property_price=ui.value,$("#property-price").text("$"+property_price),update_calculator_value()}}),$(".mortgage-property-deposit").slider({value:1e4,orientation:"horizontal",range:"max",min:1e4,max:5e5,animate:!0,slide:function(event,ui){property_deposit=ui.value,$("#property-deposit").text("$"+property_deposit),update_calculator_value()}}),$(".mortgage-property-rate").slider({value:7,orientation:"horizontal",range:"max",min:1,max:100,animate:!0,slide:function(event,ui){property_rate=ui.value,$("#mortgage-rate").text(property_rate+"%"),update_calculator_value()}}),$(".mortgage-property-term").slider({value:20,orientation:"horizontal",range:"max",min:1,max:30,animate:!0,slide:function(event,ui){property_term=ui.value,$("#mortgage-term").text(property_term+" years"),update_calculator_value()}}),$("[data-mortgage-enquiry]").on("formvalid.zf.abide",function(ev,frm){frm.find(".intl-phone").val(frm.find(".intl-phone").intlTelInput("getNumber"));var formData=frm.serialize(),url=window.mortgage_enquiry_url;$.post(url,formData).done(function(data){frm.find(".form-success-message").fadeIn()}).fail(function(data){frm.find(".form-failure-message").fadeIn()})}).on("submit",function(ev){ev.preventDefault()})});